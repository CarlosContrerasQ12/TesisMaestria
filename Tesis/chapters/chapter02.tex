When addressing deterministic optimal control problems of dynamical systems, there are two approaches, one involving Bellman's dynamic programming principle, and the other relying on the Pontryagin's maximum principle. The former approach leads to a partial differential equation, the Hamilton-Jacobi-Bellman equation, to be solved for the value function and the optimal control of the process. The latter leads to a system of ordinary differential equations, one equation forward in time for the state and one backward in time for its adjoint.

The stochastic version of these problems is solved by methods analogous to those of the deterministic case. However, there are issues with desirable mathematical properties of solutions when we state them extending directly the ones proposed by deterministic methods. That is the case of the stochastic version of the Pontryagin's maximum principle, in which the backward differential equation cannot be stated directly as an SDE with terminal condition, as the solution is not guaranteed to be adapted to the filtration generated by the brownian motion.

The theory of backward stochastic differential equations (BSDEs) emerged in Bismut's \cite{bismut_conjugate_1973} early work, and later generalized by Pardoux and Peng\cite{pardoux_adapted_1990}, as an attempt to formalize the application of the stochastic maximum principle. Here we give an introduction and compilation of results about them based on \cite{zhang_backward_2017,pardoux_stochastic_2014,romero_maestro_nodate,touzi_optimal_2013}, including its relation with a certain class of nonlinear parabolic partial differential equations, which will be the main tool for the method explained in the following chapters. 
\section{Backward stochastic differential equations}
\subsection{Motivation}
Let's introduce the necessity for a different formulation of stochastic differential equations through an example \cite{romero_maestro_nodate}. In the usual setting for a stochastic differential equation (SDE), we specify the evolution of a $\mathbb{R}^d$-valued stochastic process $X_t$ through its dynamics and an initial value $x_0\in \mathbb{R}^d$(possibly random), in the form
\begin{equation}
	X_t=x_0 +\int_{0}^{t}\mu(t,X_t)dt+\int_{0}^{t} \sigma(t,X_t) dW_t,
\end{equation}
or equivalently,
\begin{equation}
	\label{eqn:SDE}
	\begin{split}
		dX_t&=\mu(t,X_t)dt+\sigma(t,X_t)dW_t\\
		X_0&=x_0,
	\end{split}
\end{equation}
where $W_t$ is a m-dimensional Brownian motion process and the stochastic integral is defined in the Ito sense.

We know that, under some Lipschitz and boundedness conditions for the drift $\mu$ and the volatility $\sigma$, the equation with initial condition $\eqref{eqn:SDE}$ has a unique solution which is adapted with respect to the filtration $\mathbb{F}=(\mathcal{F}_t)_t$ generated by $W_t$.

Now, what happens if we consider the problem \eqref{eqn:SDE} with a terminal condition at time $T>0$? Consider, for instance, the particular case with $\mu(t,X_t)=\sigma(t,X_t)=0$, and a square integrable $\mathcal{F}_T$-measurable random variable $\xi\in L^2(0,T)$ for which we try to solve the problem of finding a process $Y_t$ such that
\begin{equation}
	\label{eqn:exampleBSDE}
	\begin{split}
		&dY_t=0\\
		&Y_t(T)=\xi.
	\end{split}
\end{equation}

This equation has a unique solution given by $Y(t)=\xi$, which is not necessarily $\mathcal{F}_t-$measurable for every $0\leq t \leq T$, and therefore \eqref{eqn:exampleBSDE} may not have solution in the usual SDE sense. 

Despite this, we can try to solve this problem reinterpreting the solution to \eqref{eqn:exampleBSDE} based on the following representation theorem.
\begin{theorem}
	\label{thm:MRT}
	\textbf{ Martingale representation theorem \cite{mao_stochastic_2008} } Let $(M_t)_{0\leq t \leq T}$ be a continuous $\mathbb{R}^d$-valued square-integrable martingale with respect to $\mathcal{F}_t$, the augmented filtration generated by an $m$-dimensional Brownian motion $(W_t)_t$. Then, there is a unique $\mathbb{R}^{d\times m}$-valued $\mathcal{F}_t$-adapted stochastic process $f(s)$, with $\mathbb{E}[\int_{0}^{T}|f|^2dt]<\infty$ , such that 
	\begin{equation}
		M_t=M_0+\int_{0}^{t}f(s)dW_s \quad \text{ for } \quad t\in [0,T],
	\end{equation}
	where the uniqueness is interpreted in the mean squared norm.
\end{theorem}

We can intend to enforce the solution $Y_t$ to be $\mathcal{F}_t-$measurable for every $0 \leq t \leq T $ by taking its conditional expectation with respect to the evolving $\sigma$-algebra
\begin{equation}
	Y(t):=\mathbb{E}[\xi|\mathcal{F}_t],
\end{equation}
which satisfies the terminal condition $Y(T)=\xi$, since $\xi$ is $\mathbb{F}_T$-measurable. Thus, as a consequence of the Martingale representation theorem \ref{thm:MRT}, we conclude that there exist a square-integrable $\mathcal{F}_t$-measurable process $Z_t$ such that 
\begin{equation}
	\label{eqn:exampleBSDEintegral}
	Y(t)=Y(0)+\int_{0}^{t}Z_sdW_s\quad \text{ for } \quad t\in [0,T],
\end{equation}
which can be written as 
\begin{equation}
	\label{eqn:exampleBSDE2}
	\begin{split}
		&dY_t=Z_tdW_t\\
		&Y(T)=\xi
	\end{split}
\end{equation}
Therefore, problem \eqref{eqn:exampleBSDE} can be reinterpreted as in problem \eqref{eqn:exampleBSDE2}, that we will denote as a bacward stochastic differential equation (BSDE) , in which we seek for a pair of processes $(Y_t,Z_t)$ which will provide an adapted solution to our original problem. Indeed, the process $Z_t$ will "steer" the system so that the process $Y_t$ remains adapted, and is thus called a control process. It is not possible to revert time as $t\to T-t$ as the filtration goes only in one direction \cite{chessari_numerical_2022}.

Finally, we can write this equation in another form. Note that \eqref{eqn:exampleBSDE2} is a forward SDE problem, hence we can solve for $Y(0)$ in the integral form , and so we have
\begin{equation}
	Y(0)=\xi-\int_{0}^{T}Z_sdW_s,
\end{equation}
that is inserted in \eqref{eqn:exampleBSDEintegral} to obtain
\begin{equation}
	Y(t)=\xi-\int_{0}^{T}Z_sdW_s+\int_{0}^{t}Z_sdW_s=\xi -\int_{t}^{T}Z_sdW_s \quad \forall t\in[0,T],
\end{equation}
which is the standard way to write the BSDE in integral form.
\subsection{An existence and uniqueness theorem}
Now that we have motivated the use of BSDEs, we follow \cite{pham_continuous-time_2009} provide a formal definition and prove that under certain regularity conditions we have a solution for that kind of equations.

Let be $(\Omega,\mathcal{F},\mathbb{P})$ a probability space and $T>0$ a fixed horizon time. We consider a $d$-dimensional Brownian motion $W=(W_t)_{t\in [0,T]}$ and let $\mathbb{F}=(\mathcal{F}_t)_{t\in[0,T]}$ be the corresponding natural augmented filtration (i.e with the completeness and right continuity conditions).

Denote by $\mathbb{S}^2(0,T)$ the set of real-valued progressively measurable processes $Y_t$ such that 
\begin{equation}
	\mathbb{E}\left[\sup_{0\leq t \leq T}|Y_t|^2\right]<\infty,
\end{equation}  
and by $\mathbb{H}^2(0,T)^d$ the set of $\mathbb{R^d}$-valued progressively measurable processes $Z_t$ such that
\begin{equation}
	\mathbb{E}\left[\int_{0}^{T}|Z_t|^2 dt\right]<\infty,
\end{equation}
\begin{definition}
	Una fola sapo
\end{definition}
\subsection{Forward-Backward stochastic differential equations}
\section{The Feynman-Kac formulas}
\subsection{The linear Feynman-Kac formula}
\subsection{The non-linear Feynman-Kac formula}

 


